<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Apache Pekko Http: Modern, fast, asynchronous, streaming-first HTTP server and client.">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="Apache Pekko Http: Modern, fast, asynchronous, streaming-first HTTP server and client.">
<link rel="shortcut icon" href="../assets/images/pekko_favicon.png">
<title>The PathMatcher DSL · Apache Pekko HTTP</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../assets/stylesheets/pekko-theme.css">
</head>
<body
data-md-color-primary="white"
data-md-color-accent="orange"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Apache Pekko HTTP" class="md-header-nav__button md-logo">
<img src="../assets/images/pekko_logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Apache Pekko HTTP
</span>
<span class="md-header-nav__topic">
The PathMatcher DSL
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/apache/incubator-pekko-http"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
apache/incubator-pekko-http
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="Apache Pekko HTTP" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../assets/images/pekko_logo.png" width="24" height="24">
</a>
<a href="../index.html" title="Apache Pekko HTTP">
Apache Pekko HTTP
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/apache/incubator-pekko-http"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
apache/incubator-pekko-http
</div>
</a>

</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<ul>
  <li><a href="../security.html" class="page">! Security Announcements !</a>
  <ul>
    <li><a href="../security.html#receiving-security-advisories" class="header">Receiving Security Advisories</a></li>
    <li><a href="../security.html#reporting-vulnerabilities" class="header">Reporting Vulnerabilities</a></li>
    <li><a href="../security.html#references" class="header">References</a></li>
  </ul></li>
  <li><a href="../release-notes/index.html" class="page">0. Release Notes</a></li>
  <li><a href="../introduction.html" class="page">1. Introduction</a>
  <ul>
    <li><a href="../introduction.html#philosophy" class="header">Philosophy</a></li>
    <li><a href="../introduction.html#using-apache-pekko-http" class="header">Using Apache Pekko HTTP</a></li>
    <li><a href="../introduction.html#routing-dsl-for-http-servers" class="header">Routing DSL for HTTP servers</a></li>
    <li><a href="../introduction.html#marshalling" class="header">Marshalling</a></li>
    <li><a href="../introduction.html#streaming" class="header">Streaming</a></li>
    <li><a href="../introduction.html#low-level-http-server-apis" class="header">Low-level HTTP server APIs</a></li>
    <li><a href="../introduction.html#http-client-api" class="header">HTTP Client API</a></li>
    <li><a href="../introduction.html#the-modules-that-make-up-apache-pekko-http" class="header">The modules that make up Apache Pekko HTTP</a></li>
  </ul></li>
  <li><a href="../usage.html" class="page">2. Usage</a>
  <ul>
    <li><a href="../configuration.html" class="page">Configuration</a></li>
    <li><a href="../migration-guide/index.html" class="page">Migration Guides</a></li>
    <li><a href="../compatibility-guidelines.html" class="page">Compatibility Guidelines</a></li>
  </ul></li>
  <li><a href="../common/index.html" class="page">3. Data Types &amp; Abstractions</a>
  <ul>
    <li><a href="../common/http-model.html" class="page">HTTP Model</a></li>
    <li><a href="../common/uri-model.html" class="page">The URI model</a></li>
    <li><a href="../common/marshalling.html" class="page">Marshalling</a></li>
    <li><a href="../common/unmarshalling.html" class="page">Unmarshalling</a></li>
    <li><a href="../common/encoding.html" class="page">Encoding / Decoding</a></li>
    <li><a href="../common/json-support.html" class="page">JSON Support</a></li>
    <li><a href="../common/xml-support.html" class="page">XML Support</a></li>
    <li><a href="../common/sse-support.html" class="page">Server-Sent Events Support</a></li>
    <li><a href="../common/timeouts.html" class="page">Timeouts</a></li>
    <li><a href="../common/caching.html" class="page">Caching</a></li>
  </ul></li>
  <li><a href="../server-side/index.html" class="page">4. Server API</a>
  <ul>
    <li><a href="../routing-dsl/index.html" class="page">Routing DSL</a></li>
    <li><a href="../server-side/low-level-api.html" class="page">Core Server API</a></li>
    <li><a href="../server-side/websocket-support.html" class="page">Server WebSocket Support</a></li>
    <li><a href="../server-side/server-https-support.html" class="page">Server HTTPS Support</a></li>
    <li><a href="../server-side/graceful-termination.html" class="page">Graceful termination</a></li>
    <li><a href="../server-side/http2.html" class="page">Server-Side HTTP/2 (Preview)</a></li>
  </ul></li>
  <li><a href="../client-side/index.html" class="page">5. Client API</a>
  <ul>
    <li><a href="../client-side/configuration.html" class="page">Configuration</a></li>
    <li><a href="../client-side/request-and-response.html" class="page">HttpRequest and HttpResponse</a></li>
    <li><a href="../client-side/request-level.html" class="page">Request-Level Client-Side API</a></li>
    <li><a href="../client-side/host-level.html" class="page">Host-Level Client-Side API</a></li>
    <li><a href="../client-side/connection-level.html" class="page">Connection-Level Client-Side API</a></li>
    <li><a href="../client-side/pool-overflow.html" class="page">Pool overflow and the max-open-requests setting</a></li>
    <li><a href="../client-side/client-https-support.html" class="page">Client-Side HTTPS Support</a></li>
    <li><a href="../client-side/client-transport.html" class="page">Pluggable Client Transports / HTTP(S) proxy Support</a></li>
    <li><a href="../client-side/websocket-support.html" class="page">Client-Side WebSocket Support</a></li>
    <li><a href="../client-side/http2.html" class="page">Client-Side HTTP/2 (Preview)</a></li>
  </ul></li>
  <li><a href="../extensions.html" class="page">6. Extensions</a></li>
  <li><a href="../technologies.html" class="page">7. Supported Technologies</a>
  <ul>
    <li><a href="../technologies.html#http" class="header">HTTP</a></li>
    <li><a href="../technologies.html#https" class="header">HTTPS</a></li>
    <li><a href="../technologies.html#websocket" class="header">WebSocket</a></li>
    <li><a href="../technologies.html#http-2" class="header">HTTP/2</a></li>
    <li><a href="../technologies.html#dns" class="header">DNS</a></li>
    <li><a href="../technologies.html#multipart" class="header">Multipart</a></li>
    <li><a href="../technologies.html#server-sent-events-sse-" class="header">Server-sent Events (SSE)</a></li>
    <li><a href="../technologies.html#json" class="header">JSON</a></li>
    <li><a href="../technologies.html#xml" class="header">XML</a></li>
    <li><a href="../technologies.html#gzip-and-deflate-content-encoding" class="header">Gzip and Deflate Content-Encoding</a></li>
  </ul></li>
  <li><a href="../tipsandtricks.html" class="page">8. Tips And Tricks</a>
  <ul>
    <li><a href="../troubleshooting/index.html" class="page">Troubleshooting</a></li>
    <li><a href="../handling-blocking-operations-in-pekko-http-routes.html" class="page">Handling blocking operations in Apache Pekko HTTP</a></li>
    <li><a href="../implications-of-streaming-http-entity.html" class="page">Implications of the streaming nature of Request/Response Entities</a></li>
  </ul></li>
  <li><a href="../contributing.html" class="page">9. Contributing</a>
  <ul>
    <li><a href="../contributing.html#welcome-" class="header">Welcome!</a></li>
    <li><a href="../contributing.html#snapshots" class="header">Snapshots</a></li>
  </ul></li>
  <li><a href="../reference.html" class="page">10. Reference</a>
  <ul>
    <li><a href="../reference.html#api-documentation" class="header">API Documentation</a></li>
    <li><a href="../reference.html#directives" class="header">Directives</a></li>
    <li><a href="../reference.html#books" class="header">Books</a></li>
  </ul></li>
</ul>

<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../routing-dsl/path-matchers.html#the-pathmatcher-dsl" class="header">The PathMatcher DSL</a>
  <ul>
    <li><a href="../routing-dsl/path-matchers.html#overview" class="header">Overview</a></li>
    <li><a href="../routing-dsl/path-matchers.html#basic-pathmatchers" class="header">Basic PathMatchers</a></li>
    <li><a href="../routing-dsl/path-matchers.html#combinators" class="header group-scala">Combinators</a></li>
    <li><a href="../routing-dsl/path-matchers.html#modifiers" class="header group-scala">Modifiers</a></li>
    <li><a href="../routing-dsl/path-matchers.html#examples" class="header">Examples</a></li>
  </ul></li>
</ul>
</nav>


<ul class="md-nav__list md-nav__links">
<li class="md-nav__item"><a href="https://apache.org"><i class="md-icon">link</i> Apache Software Foundation</a></li>
<li class="md-nav__item"><a href="https://apache.org/licenses/"><i class="md-icon">link</i>&nbsp;License</a></li>
<li class="md-nav__item"><a href="https://apache.org/security/"><i class="md-icon">link</i>&nbsp;Security</a></li>
<li class="md-nav__item"><a href="https://www.apache.org/foundation/sponsorship.html"><i class="md-icon">link</i>&nbsp;Donate</a></li>
<li class="md-nav__item"><a href="https://www.apache.org/foundation/thanks.html"><i class="md-icon">link</i>&nbsp;Thanks</a></li>
</ul>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.0.0+4308-98f0ff9c*
</label>
</li>
</ul>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../routing-dsl/path-matchers.html#the-pathmatcher-dsl" class="header">The PathMatcher DSL</a>
  <ul>
    <li><a href="../routing-dsl/path-matchers.html#overview" class="header">Overview</a></li>
    <li><a href="../routing-dsl/path-matchers.html#basic-pathmatchers" class="header">Basic PathMatchers</a></li>
    <li><a href="../routing-dsl/path-matchers.html#combinators" class="header group-scala">Combinators</a></li>
    <li><a href="../routing-dsl/path-matchers.html#modifiers" class="header group-scala">Modifiers</a></li>
    <li><a href="../routing-dsl/path-matchers.html#examples" class="header">Examples</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#the-pathmatcher-dsl" name="the-pathmatcher-dsl" class="anchor"><span class="anchor-link"></span></a>The PathMatcher DSL</h1>
<p>The <code>PathMatcher</code> mini-DSL is used to match incoming URL&rsquo;s and extract values from them. It is used in the <a href="directives/path-directives/path.html"><code>path</code> directive</a>.</p>
<p>Some simple examples of the DSL in action can be found <a href="#examples">below</a>.</p>
<h2><a href="#overview" name="overview" class="anchor"><span class="anchor-link"></span></a>Overview</h2>
<p>When a request (or rather the respective <span class="group-java"><a href="https://pekko.apache.org/api/pekko-http/0.0.0+4308-98f0ff9c-SNAPSHOT/org/apache/pekko/http/javadsl/server/RequestContext.html" title="org.apache.pekko.http.javadsl.server.RequestContext"><code>RequestContext</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/japi/pekko-http/0.0.0+4308-98f0ff9c-SNAPSHOT/org/apache/pekko/http/scaladsl/server/RequestContext.html" title="org.apache.pekko.http.scaladsl.server.RequestContext"><code>RequestContext</code></a></span> instance) enters the route structure it has an &ldquo;unmatched path&rdquo; that is identical to the <code>request.uri.path</code>. As it descends the routing tree and passes through one or more <a href="directives/path-directives/pathPrefix.html">pathPrefix</a> or <a href="directives/path-directives/path.html">path</a> directives the &ldquo;unmatched path&rdquo; progressively gets &ldquo;eaten into&rdquo; from the left until, in most cases, it eventually has been consumed completely.</p>
<p>What exactly gets matched and consumed as well as extracted from the unmatched path in each directive is defined with the path matching DSL, which is built around these types:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">trait PathMatcher[L: Tuple]
type PathMatcher0 = PathMatcher[Unit]
type PathMatcher1[T] = PathMatcher[Tuple1[T]]
type PathMatcher2[T,U] = PathMatcher[Tuple2[T,U]]
// .. etc
</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">package org.apache.pekko.http.javadsl.server;
class PathMatcher0
class PathMatcher1&lt;T1&gt;
class PathMatcher2&lt;T1, T2&gt;
// .. etc
</code></pre></dd>
</dl>
<p>The number and types of the values extracted by a <code>PathMatcher</code> instance <span class="group-scala">is represented by the <code>L</code> type parameter which needs to be one of Scala&rsquo;s TupleN types or <code>Unit</code> (which is designated by the <code>Tuple</code> context bound).</span> <span class="group-java">is determined by the class and its type parameters.</span> <span class="group-scala">The convenience alias <code>PathMatcher0</code> can be used for all matchers which don&rsquo;t extract anything while <code>PathMatcher1[T]</code> defines a matcher which only extracts a single value of type <code>T</code>.</span></p>
<p>Here is an example of a more complex <code>PathMatcher</code> expression:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko-http/tree/main/docs/src/test/scala/docs/http/scaladsl/server/directives/PathDirectivesExamplesSpec.scala#L24-L30" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val matcher: PathMatcher1[Option[Int]] =
  &quot;foo&quot; / &quot;bar&quot; / &quot;X&quot; ~ IntNumber.? / (&quot;edit&quot; | &quot;create&quot;)

val route: Route =
  path(matcher) { i: Option[Int] =&gt;
    complete(s&quot;Matched X${i.getOrElse(&quot;&quot;)}&quot;)
  }</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko-http/tree/main/docs/src/test/java/docs/http/javadsl/server/directives/PathDirectivesExamplesTest.java#L27-L141" target="_blank" title="Go to snippet source">source</a><code class="language-java">import org.apache.pekko.http.javadsl.server.PathMatcher1;
import static org.apache.pekko.http.javadsl.server.PathMatchers.segment;
import static org.apache.pekko.http.javadsl.server.PathMatchers.integerSegment;

PathMatcher1&lt;Integer&gt; matcher =
  PathMatchers
    .segment(&quot;foo&quot;)
    .slash(&quot;bar&quot;)
    .slash(
      segment(&quot;X&quot;).concat(integerSegment())
    )
    .slash(
      segment(&quot;edit&quot;).orElse(segment(&quot;create&quot;))
    );

Route route = path(matcher, i -&gt;
  complete(&quot;Matched X&quot; + i)
);</code></pre></dd>
</dl>
<p>This will match paths like <code>foo/bar/X42/edit</code> or <span class="group-scala"><code>foo/bar/X/create</code></span><span class="group-java"><code>foo/bar/X37/create</code></span>.</p><div class="callout note "><div class="callout-title">Note</div>
<p>The path matching DSL describes what paths to accept <strong>after</strong> URL decoding. This is why the path-separating slashes have special status and cannot simply be specified as part of a string! <strong>The string &ldquo;foo/bar&rdquo; would match the raw URI path &ldquo;foo%2Fbar&rdquo;</strong>, which is most likely not what you want!</p></div>
<h2><a href="#basic-pathmatchers" name="basic-pathmatchers" class="anchor"><span class="anchor-link"></span></a>Basic PathMatchers</h2><div class="group-scala">
<p>A complex <code>PathMatcher</code> can be constructed by combining or modifying more basic ones. Here are the basic matchers that Apache Pekko HTTP already provides for you:</p>
<dl>
  <dt>String</dt>
  <dd>You can use a <code>String</code> instance as a <code>PathMatcher0</code>. Strings simply match themselves and extract no value. Note that strings are interpreted as the decoded representation of the path, so if they include a &lsquo;/&rsquo; character this character will match &ldquo;%2F&rdquo; in the encoded raw URI!</dd>
  <dt>Regex</dt>
  <dd>You can use a <code>Regex</code> instance as a <code>PathMatcher1[String]</code>, which matches whatever the regex matches and extracts one <code>String</code> value. A <code>PathMatcher</code> created from a regular expression extracts either the complete match (if the regex doesn&rsquo;t contain a capture group) or the capture group (if the regex contains exactly one capture group). If the regex contains more than one capture group an <code>IllegalArgumentException</code> will be thrown.</dd>
  <dt>Map[String, T]
  </dt>
  <dd>You can use a <code>Map[String, T]</code> instance as a <code>PathMatcher1[T]</code>, which matches any of the keys and extracts the respective map value for it.</dd>
  <dt>Slash: PathMatcher0
  </dt>
  <dd>Matches exactly one path-separating slash (<code>/</code>) character and extracts nothing.</dd>
  <dt>Segment: PathMatcher1[String]
  </dt>
  <dd>Matches if the unmatched path starts with a path segment (i.e. not a slash). If so the path segment is extracted as a <code>String</code> instance.</dd>
  <dt>PathEnd: PathMatcher0
  </dt>
  <dd>Matches the very end of the path, similar to <code>$</code> in regular expressions and extracts nothing.</dd>
  <dt>Remaining: PathMatcher1[String]
  </dt>
  <dd>Matches and extracts the complete remaining unmatched part of the request&rsquo;s URI path as an (encoded!) String. If you need access to the remaining <em>decoded</em> elements of the path use <code>RemainingPath</code> instead.</dd>
  <dt>RemainingPath: PathMatcher1[Path]
  </dt>
  <dd>Matches and extracts the complete remaining, unmatched part of the request&rsquo;s URI path.</dd>
  <dt>IntNumber: PathMatcher1[Int]
  </dt>
  <dd>Efficiently matches a number of decimal digits (unsigned) and extracts their (non-negative) <code>Int</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Int</code> value larger than <code>Int.MaxValue</code>.</dd>
  <dt>LongNumber: PathMatcher1[Long]
  </dt>
  <dd>Efficiently matches a number of decimal digits (unsigned) and extracts their (non-negative) <code>Long</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Long</code> value larger than <code>Long.MaxValue</code>.</dd>
  <dt>HexIntNumber: PathMatcher1[Int]
  </dt>
  <dd>Efficiently matches a number of hex digits and extracts their (non-negative) <code>Int</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Int</code> value larger than <code>Int.MaxValue</code>.</dd>
  <dt>HexLongNumber: PathMatcher1[Long]
  </dt>
  <dd>Efficiently matches a number of hex digits and extracts their (non-negative) <code>Long</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Long</code> value larger than <code>Long.MaxValue</code>.</dd>
  <dt>DoubleNumber: PathMatcher1[Double]
  </dt>
  <dd>Matches and extracts a <code>Double</code> value. The matched string representation is the pure decimal, optionally signed form of a double value, i.e. without exponent.</dd>
  <dt>JavaUUID: PathMatcher1[UUID]
  </dt>
  <dd>Matches and extracts a <code>java.util.UUID</code> instance.</dd>
  <dt>Neutral: PathMatcher0
  </dt>
  <dd>A matcher that always matches, doesn&rsquo;t consume anything and extracts nothing. Serves mainly as a neutral element in <code>PathMatcher</code> composition.</dd>
  <dt>Segments: PathMatcher1[List[String]]
  </dt>
  <dd>Matches all remaining segments as a list of strings. Note that this can also be &ldquo;no segments&rdquo; resulting in the empty list. If the path has a trailing slash this slash will <em>not</em> be matched, i.e. remain unmatched and to be consumed by potentially nested directives.</dd>
  <dt>separateOnSlashes(string: String): PathMatcher0
  </dt>
  <dd>Converts a path string containing slashes into a <code>PathMatcher0</code> that interprets slashes as path segment separators. This means that a matcher matching &ldquo;%2F&rdquo; cannot be constructed with this helper.</dd>
  <dt>provide[L: Tuple](extractions: L): PathMatcher[L]
  </dt>
  <dd>Always matches, consumes nothing and extracts the given <code>TupleX</code> of values.</dd>
  <dt>PathMatcher[L: Tuple](prefix: Path, extractions: L): PathMatcher[L]
  </dt>
  <dd>Matches and consumes the given path prefix and extracts the given list of extractions. If the given prefix is empty the returned matcher matches always and consumes nothing.</dd>
</dl></div><div class="group-java">
<p>A path matcher is a description of a part of a path to match. The simplest path matcher is <code>PathMatcher.segment</code> which matches exactly one path segment against the supplied constant string.</p>
<p>Other path matchers defined in <span class="group-java"><a href="https://pekko.apache.org/api/pekko-http/0.0.0+4308-98f0ff9c-SNAPSHOT/org/apache/pekko/http/javadsl/server/PathMatchers.html" title="org.apache.pekko.http.javadsl.server.PathMatchers"><code>PathMatchers</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/japi/pekko-http/0.0.0+4308-98f0ff9c-SNAPSHOT/org/apache/pekko/http/scaladsl/server/PathMatchers.html" title="org.apache.pekko.http.scaladsl.server.PathMatchers"><code>PathMatchers</code></a></span> match the end of the path (<code>PathMatchers.END</code>), a single slash (<code>PathMatchers.SLASH</code>), or nothing at all (<code>PathMatchers.NEUTRAL</code>).</p>
<p>Many path matchers are hybrids that can both match (by using them with one of the PathDirectives) and extract values, Extracting a path matcher value (i.e. using it with <code>handleWithX</code>) is only allowed if it nested inside a path directive that uses that path matcher and so specifies at which position the value should be extracted from the path.</p>
<p>Predefined path matchers allow extraction of various types of values:</p>
<dl>
  <dt>PathMatchers.segment(String)
  </dt>
  <dd>Strings simply match themselves and extract no value. Note that strings are interpreted as the decoded representation of the path, so if they include a &lsquo;/&rsquo; character this character will match &ldquo;%2F&rdquo; in the encoded raw URI!</dd>
  <dt>PathMatchers.segment(java.util.regex.Pattern)
  </dt>
  <dd>You can use a regular expression instance as a path matcher, which matches whatever the regex matches and extracts one <code>String</code> value. A <code>PathMatcher</code> created from a regular expression extracts either the complete match (if the regex doesn&rsquo;t contain a capture group) or the capture group (if the regex contains exactly one capture group). If the regex contains more than one capture group an <code>IllegalArgumentException</code> will be thrown.</dd>
  <dt>PathMatchers.SLASH
  </dt>
  <dd>Matches exactly one path-separating slash (<code>/</code>) character.</dd>
  <dt>PathMatchers.END
  </dt>
  <dd>Matches the very end of the path, similar to <code>$</code> in regular expressions.</dd>
  <dt>PathMatchers.Segment
  </dt>
  <dd>Matches if the unmatched path starts with a path segment (i.e. not a slash). If so the path segment is extracted as a <code>String</code> instance.</dd>
  <dt>PathMatchers.Remaining
  </dt>
  <dd>Matches and extracts the complete remaining unmatched part of the request&rsquo;s URI path as an (encoded!) String. If you need access to the remaining <em>decoded</em> elements of the path use <code>RemainingPath</code> instead.</dd>
  <dt>PathMatchers.intValue
  </dt>
  <dd>Efficiently matches a number of decimal digits (unsigned) and extracts their (non-negative) <code>Int</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Int</code> value larger than <code>Integer.MAX_VALUE</code>.</dd>
  <dt>PathMatchers.longValue
  </dt>
  <dd>Efficiently matches a number of decimal digits (unsigned) and extracts their (non-negative) <code>Long</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Long</code> value larger than <code>Long.MAX_VALUE</code>.</dd>
  <dt>PathMatchers.hexIntValue
  </dt>
  <dd>Efficiently matches a number of hex digits and extracts their (non-negative) <code>Int</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Int</code> value larger than <code>Integer.MAX_VALUE</code>.</dd>
  <dt>PathMatchers.hexLongValue
  </dt>
  <dd>Efficiently matches a number of hex digits and extracts their (non-negative) <code>Long</code> value. The matcher will not match zero digits or a sequence of digits that would represent an <code>Long</code> value larger than <code>Long.MAX_VALUE</code>.</dd>
  <dt>PathMatchers.uuid
  </dt>
  <dd>Matches and extracts a <code>java.util.UUID</code> instance.</dd>
  <dt>PathMatchers.NEUTRAL
  </dt>
  <dd>A matcher that always matches, doesn&rsquo;t consume anything and extracts nothing. Serves mainly as a neutral element in <code>PathMatcher</code> composition.</dd>
  <dt>PathMatchers.segments
  </dt>
  <dd>Matches all remaining segments as a list of strings. Note that this can also be &ldquo;no segments&rdquo; resulting in the empty list. If the path has a trailing slash this slash will <em>not</em> be matched, i.e. remain unmatched and to be consumed by potentially nested directives.</dd>
</dl></div><div class="group-scala">
<h2><a href="#combinators" name="combinators" class="anchor"><span class="anchor-link"></span></a>Combinators</h2>
<p>Path matchers can be combined with these combinators to form higher-level constructs:</p>
<dl>
  <dt>Tilde Operator (<code>~</code>)
  </dt>
  <dd>The tilde is the most basic combinator. It simply concatenates two matchers into one, i.e if the first one matched (and consumed) the second one is tried. The extractions of both matchers are combined type-safely. This is an alias for the <code>append</code> method. For example: <code>&quot;foo&quot; ~ &quot;bar&quot;</code> yields a matcher that is identical to <code>&quot;foobar&quot;</code>.</dd>
  <dt>Slash Operator (<code>/</code>)
  </dt>
  <dd>This operator concatenates two matchers and inserts a <code>Slash</code> matcher in between them. This is an alias for the <code>slash</code> method. For example: <code>&quot;foo&quot; / &quot;bar&quot;</code> is identical to <code>&quot;foo&quot; ~ Slash ~ &quot;bar&quot;</code>.</dd>
  <dt>Pipe Operator (<code>|</code>)
  </dt>
  <dd>This operator combines two matcher alternatives in that the second one is only tried if the first one did <em>not</em> match. The two sub-matchers must have compatible types. This is an alias for the <code>or</code> method. For example: <code>&quot;foo&quot; | &quot;bar&quot;</code> will match either &ldquo;foo&rdquo; <em>or</em> &ldquo;bar&rdquo;. When combining an alternative expressed using this operator with an <code>/</code> operator, make sure to surround the alternative with parentheses, like so: <code>(&quot;foo&quot; | &quot;bar&quot;) / &quot;bom&quot;</code>. Otherwise, the <code>/</code> operator takes precedence and would only apply to the right-hand side of the alternative.</dd>
</dl>
<h2><a href="#modifiers" name="modifiers" class="anchor"><span class="anchor-link"></span></a>Modifiers</h2>
<p>Path matcher instances can be transformed with these modifier methods:</p>
<dl>
  <dt>/</dt>
  <dd>The slash operator cannot only be used as combinator for combining two matcher instances, it can also be used as a postfix call. <code>matcher /</code> is identical to <code>matcher ~ Slash</code> but shorter and easier to read. This is an alias for the <code>slash</code> method.</dd>
</dl>
<p>? : By postfixing a matcher with <code>?</code> you can turn any <code>PathMatcher</code> into one that always matches, optionally consumes and potentially extracts an <code>Option</code> of the underlying matchers extraction. This is an alias for the <code>optional</code> method. The result type depends on the type of the underlying matcher:</p>
<table>
  <thead>
    <tr>
      <th>If a <code>matcher</code> is of type </th>
      <th>then <code>matcher.?</code> is of type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PathMatcher0</code> </td>
      <td><code>PathMatcher0</code> </td>
    </tr>
    <tr>
      <td><code>PathMatcher1[T]</code> </td>
      <td><code>PathMatcher1[Option[T]]</code></td>
    </tr>
    <tr>
      <td><code>PathMatcher[L: Tuple]</code> </td>
      <td><code>PathMatcher[Option[L]]</code> </td>
    </tr>
  </tbody>
</table>
<p>repeat(separator: PathMatcher0 = PathMatchers.Neutral) : By postfixing a matcher with <code>repeat(separator)</code> you can turn any <code>PathMatcher</code> into one that always matches, consumes zero or more times (with the given separator) and potentially extracts a <code>List</code> of the underlying matcher&rsquo;s extractions. The result type depends on the type of the underlying matcher:</p>
<table>
  <thead>
    <tr>
      <th>If a <code>matcher</code> is of type </th>
      <th>then <code>matcher.repeat(...)</code> is of type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PathMatcher0</code> </td>
      <td><code>PathMatcher0</code> </td>
    </tr>
    <tr>
      <td><code>PathMatcher1[T]</code> </td>
      <td><code>PathMatcher1[List[T]]</code></td>
    </tr>
    <tr>
      <td><code>PathMatcher[L: Tuple]</code> </td>
      <td><code>PathMatcher[List[L]]</code> </td>
    </tr>
  </tbody>
</table>
<dl>
  <dt>unary_!
  </dt>
  <dd>By prefixing a matcher with <code>!</code> it can be turned into a <code>PathMatcher0</code> that only matches if the underlying matcher does <em>not</em> match and vice versa. This is the operator alternative to the <code>not</code> method.</dd>
  <dt>transform / (h)flatMap / (h)map
  </dt>
  <dd>These modifiers allow you to append your own &ldquo;post-application&rdquo; logic to another matcher in order to form a custom one. You can map over the extraction(s), turn mismatches into matches or vice-versa or do anything else with the results of the underlying matcher. Take a look at the method signatures and implementations for more guidance as to how to use them.</dd>
</dl></div>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<p>Here&rsquo;s a collection of path matching examples:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko-http/tree/main/docs/src/test/scala/docs/http/scaladsl/server/directives/PathDirectivesExamplesSpec.scala#L34-L65" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// matches /foo/
path(&quot;foo&quot;./)

// matches /foo/bar
path(&quot;foo&quot; / &quot;bar&quot;)

// NOTE: matches /foo%2Fbar and doesn&#39;t match /foo/bar
path(&quot;foo/bar&quot;)

// matches /foo/bar
path(separateOnSlashes(&quot;foo/bar&quot;))

// matches e.g. /foo/123 and extracts &quot;123&quot; as a String
path(&quot;foo&quot; / &quot;&quot;&quot;\d+&quot;&quot;&quot;.r)

// matches e.g. /foo/bar123 and extracts &quot;123&quot; as a String
path(&quot;foo&quot; / &quot;&quot;&quot;bar(\d+)&quot;&quot;&quot;.r)

// similar to `path(Segments)`
path(Segment.repeat(10, separator = Slash))

// matches e.g. /i42 or /hCAFE and extracts an Int
path(&quot;i&quot; ~ IntNumber | &quot;h&quot; ~ HexIntNumber)

// identical to path(&quot;foo&quot; ~ (PathEnd | Slash))
path(&quot;foo&quot; ~ Slash.?)

// matches /red or /green or /blue and extracts 1, 2 or 3 respectively
path(Map(&quot;red&quot; -&gt; 1, &quot;green&quot; -&gt; 2, &quot;blue&quot; -&gt; 3))

// matches anything starting with &quot;/foo&quot; except for /foobar
pathPrefix(&quot;foo&quot; ~ not(&quot;bar&quot;))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko-http/tree/main/docs/src/test/java/docs/http/javadsl/server/PathDirectiveExampleTest.java#L22-L92" target="_blank" title="Go to snippet source">source</a><code class="language-java">import static org.apache.pekko.http.javadsl.server.Directives.complete;
import static org.apache.pekko.http.javadsl.server.Directives.path;
import static org.apache.pekko.http.javadsl.server.Directives.pathEnd;
import static org.apache.pekko.http.javadsl.server.Directives.pathPrefix;
import static org.apache.pekko.http.javadsl.server.Directives.pathSingleSlash;
// matches &quot;/test&quot;
path(&quot;test&quot;, () -&gt;
  complete(StatusCodes.OK)
);

// matches &quot;/test&quot;, as well
path(PathMatchers.segment(&quot;test&quot;), () -&gt;
  complete(StatusCodes.OK)
);

// matches &quot;/admin/user&quot;
path(PathMatchers.segment(&quot;admin&quot;)
  .slash(&quot;user&quot;), () -&gt;
  complete(StatusCodes.OK)
);

// matches &quot;/admin/user&quot;, as well
pathPrefix(&quot;admin&quot;, () -&gt;
  path(&quot;user&quot;, () -&gt;
    complete(StatusCodes.OK)
  )
);

// matches &quot;/admin/user/&lt;user-id&gt;&quot;
path(PathMatchers.segment(&quot;admin&quot;)
  .slash(&quot;user&quot;)
  .slash(PathMatchers.integerSegment()), userId -&gt; {
    return complete(&quot;Hello user &quot; + userId);
  }
);

// matches &quot;/admin/user/&lt;user-id&gt;&quot;, as well
pathPrefix(&quot;admin&quot;, () -&gt;
  path(&quot;user&quot;, () -&gt;
    path(PathMatchers.integerSegment(), userId -&gt;
      complete(&quot;Hello user &quot; + userId)
    )
  )
);

// never matches
path(&quot;admin&quot;, () -&gt; // oops this only matches &quot;/admin&quot;, and no sub-paths
  path(&quot;user&quot;, () -&gt;
    complete(StatusCodes.OK)
  )
);

// matches &quot;/user/&quot; with the first subroute, &quot;/user&quot; (without a trailing slash)
// with the second subroute, and &quot;/user/&lt;user-id&gt;&quot; with the last one.
pathPrefix(&quot;user&quot;, () -&gt; concat(
  pathSingleSlash(() -&gt;
    complete(StatusCodes.OK)
  ),
  pathEnd(() -&gt;
    complete(StatusCodes.OK)
  ),
  path(PathMatchers.integerSegment(), userId -&gt;
    complete(&quot;Hello user &quot; + userId)
  )
));</code></pre></dd>
</dl>
</div>
<div>
<a href="https://github.com/apache/incubator-pekko-http/tree/main/docs/src/main/paradox/routing-dsl/path-matchers.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.0.0+4308-98f0ff9c*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../routing-dsl/directives/path-directives/ignoreTrailingSlash.html" title="ignoreTrailingSlash" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
ignoreTrailingSlash
</span>
</div>
</a>
<a href="../routing-dsl/directives/range-directives/index.html" title="RangeDirectives" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
RangeDirectives
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Copyright © 2022, 2023 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the Apache License, Version 2.0.
 This product contains significant parts that were originally based on software from Lightbend (<a href="https://akka.io/">Akka</a>).
 Copyright (C) 2009-2022 Lightbend Inc. &lt;https://www.lightbend.com&gt; Apache Pekko is derived from Akka 2.6.x,
 the last version that was distributed under the Apache License, Version 2.0 License.
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../assets/javascripts/groups.js"></script>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
