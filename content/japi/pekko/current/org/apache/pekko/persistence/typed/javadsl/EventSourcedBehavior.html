<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.17) on Wed Mar 01 23:28:13 CET 2023 -->
<title>EventSourcedBehavior</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-03-01">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="EventSourcedBehavior";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":6,"i2":10,"i3":6,"i4":10,"i5":6,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":42,"i19":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.pekko.persistence.typed.javadsl</a></div>
<h2 title="Class EventSourcedBehavior" class="title">Class EventSourcedBehavior&lt;Command,&#8203;Event,&#8203;State&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../actor/typed/Behavior.html" title="class in org.apache.pekko.actor.typed">org.apache.pekko.actor.typed.Behavior</a>&lt;T&gt;</li>
<li>
<ul class="inheritance">
<li><a href="../../../actor/typed/internal/BehaviorImpl.DeferredBehavior.html" title="class in org.apache.pekko.actor.typed.internal">org.apache.pekko.actor.typed.internal.BehaviorImpl.DeferredBehavior</a>&lt;Command&gt;</li>
<li>
<ul class="inheritance">
<li>org.apache.pekko.persistence.typed.javadsl.EventSourcedBehavior&lt;Command,&#8203;Event,&#8203;State&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="EventSourcedBehaviorWithEnforcedReplies.html" title="class in org.apache.pekko.persistence.typed.javadsl">EventSourcedBehaviorWithEnforcedReplies</a></code>, <code><a href="ReplicatedEventSourcedBehavior.html" title="class in org.apache.pekko.persistence.typed.javadsl">ReplicatedEventSourcedBehavior</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">EventSourcedBehavior&lt;Command,&#8203;Event,&#8203;State&gt;</span>
extends <a href="../../../actor/typed/internal/BehaviorImpl.DeferredBehavior.html" title="class in org.apache.pekko.actor.typed.internal">BehaviorImpl.DeferredBehavior</a>&lt;Command&gt;</pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.org.apache.pekko.actor.typed.Behavior">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.pekko.actor.typed.<a href="../../../actor/typed/Behavior.html" title="class in org.apache.pekko.actor.typed">Behavior</a></h3>
<code><a href="../../../actor/typed/Behavior.BehaviorDecorators.html" title="class in org.apache.pekko.actor.typed">Behavior.BehaviorDecorators</a>&lt;<a href="../../../actor/typed/Behavior.BehaviorDecorators.html" title="type parameter in Behavior.BehaviorDecorators">Inner</a>&gt;, <a href="../../../actor/typed/Behavior.BehaviorDecorators$.html" title="class in org.apache.pekko.actor.typed">Behavior.BehaviorDecorators$</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.apache.pekko.persistence.typed.PersistenceId)">EventSourcedBehavior</a></span>&#8203;(<a href="../PersistenceId.html" title="class in org.apache.pekko.persistence.typed">PersistenceId</a>&nbsp;persistenceId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.apache.pekko.persistence.typed.PersistenceId,org.apache.pekko.actor.typed.BackoffSupervisorStrategy)">EventSourcedBehavior</a></span>&#8203;(<a href="../PersistenceId.html" title="class in org.apache.pekko.persistence.typed">PersistenceId</a>&nbsp;persistenceId,
                    <a href="../../../actor/typed/BackoffSupervisorStrategy.html" title="class in org.apache.pekko.actor.typed">BackoffSupervisorStrategy</a>&nbsp;onPersistFailure)</code></th>
<td class="colLast">
<div class="block">If using onPersistFailure the supervision is only around the event sourced behavior not any outer setup/withTimers
 block.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../actor/typed/Behavior.html" title="class in org.apache.pekko.actor.typed">Behavior</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#apply(org.apache.pekko.actor.typed.TypedActorContext)">apply</a></span>&#8203;(<a href="../../../actor/typed/TypedActorContext.html" title="interface in org.apache.pekko.actor.typed">TypedActorContext</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>&gt;&nbsp;context)</code></th>
<td class="colLast">
<div class="block">INTERNAL API: DeferredBehavior init, not for user extension</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="CommandHandler.html" title="interface in org.apache.pekko.persistence.typed.javadsl">CommandHandler</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#commandHandler()">commandHandler</a></span>()</code></th>
<td class="colLast">
<div class="block">Implement by handling incoming commands and return an <code>Effect()</code> to persist or signal other effects
 of the command handling such as stopping the behavior or others.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="EffectFactories.html" title="class in org.apache.pekko.persistence.typed.javadsl">EffectFactories</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#Effect()">Effect</a></span>()</code></th>
<td class="colLast">
<div class="block">Factory of effects.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#emptyState()">emptyState</a></span>()</code></th>
<td class="colLast">
<div class="block">Implement by returning the initial empty state object.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../EventAdapter.html" title="class in org.apache.pekko.persistence.typed">EventAdapter</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#eventAdapter()">eventAdapter</a></span>()</code></th>
<td class="colLast">
<div class="block">Transform the event in another type before giving to the journal.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="EventHandler.html" title="interface in org.apache.pekko.persistence.typed.javadsl">EventHandler</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#eventHandler()">eventHandler</a></span>()</code></th>
<td class="colLast">
<div class="block">Implement by applying the event to the current state in order to return a new state.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#journalPluginId()">journalPluginId</a></span>()</code></th>
<td class="colLast">
<div class="block">Override and define the journal plugin id that this actor should use instead of the default.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lastSequenceNumber(org.apache.pekko.actor.typed.javadsl.ActorContext)">lastSequenceNumber</a></span>&#8203;(<a href="../../../actor/typed/javadsl/ActorContext.html" title="interface in org.apache.pekko.actor.typed.javadsl">ActorContext</a>&lt;?&gt;&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">The last sequence number that was persisted, can only be called from inside the handlers of an <code>EventSourcedBehavior</code></div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected <a href="CommandHandlerBuilder.html" title="class in org.apache.pekko.persistence.typed.javadsl">CommandHandlerBuilder</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newCommandHandlerBuilder()">newCommandHandlerBuilder</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected <a href="EventHandlerBuilder.html" title="class in org.apache.pekko.persistence.typed.javadsl">EventHandlerBuilder</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newEventHandlerBuilder()">newEventHandlerBuilder</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected <a href="SignalHandlerBuilder.html" title="class in org.apache.pekko.persistence.typed.javadsl">SignalHandlerBuilder</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newSignalHandlerBuilder()">newSignalHandlerBuilder</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../PersistenceId.html" title="class in org.apache.pekko.persistence.typed">PersistenceId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#persistenceId()">persistenceId</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="Recovery.html" title="class in org.apache.pekko.persistence.typed.javadsl">Recovery</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recovery()">recovery</a></span>()</code></th>
<td class="colLast">
<div class="block">Override to change the strategy for recovery of snapshots and events.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="RetentionCriteria.html" title="class in org.apache.pekko.persistence.typed.javadsl">RetentionCriteria</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#retentionCriteria()">retentionCriteria</a></span>()</code></th>
<td class="colLast">
<div class="block">Criteria for retention/deletion of snapshots and events.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shouldSnapshot(State,Event,long)">shouldSnapshot</a></span>&#8203;(<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&nbsp;state,
              <a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&nbsp;event,
              long&nbsp;sequenceNr)</code></th>
<td class="colLast">
<div class="block">Initiates a snapshot if the given predicate evaluates to true.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected <a href="SignalHandler.html" title="class in org.apache.pekko.persistence.typed.javadsl">SignalHandler</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#signalHandler()">signalHandler</a></span>()</code></th>
<td class="colLast">
<div class="block">Override to react on general lifecycle signals and persistence specific signals (subtypes of
 <code>pekko.persistence.typed.EventSourcedSignal</code>).</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="../SnapshotAdapter.html" title="interface in org.apache.pekko.persistence.typed">SnapshotAdapter</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotAdapter()">snapshotAdapter</a></span>()</code></th>
<td class="colLast">
<div class="block">Transform the state into another type before giving it to and from the journal.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotPluginId()">snapshotPluginId</a></span>()</code></th>
<td class="colLast">
<div class="block">Override and define the snapshot store plugin id that this actor should use instead of the default.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="../SnapshotSelectionCriteria.html" title="class in org.apache.pekko.persistence.typed">SnapshotSelectionCriteria</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotSelectionCriteria()">snapshotSelectionCriteria</a></span>()</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">override recovery instead.</div>
</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tagsFor(Event)">tagsFor</a></span>&#8203;(<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&nbsp;event)</code></th>
<td class="colLast">
<div class="block">The <code>tagger</code> function should give event tags, which will be used in persistence query</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.pekko.actor.typed.Behavior">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.pekko.actor.typed.<a href="../../../actor/typed/Behavior.html" title="class in org.apache.pekko.actor.typed">Behavior</a></h3>
<code><a href="../../../actor/typed/Behavior.html#BehaviorDecorators(org.apache.pekko.actor.typed.Behavior)">BehaviorDecorators</a>, <a href="../../../actor/typed/Behavior.html#canonicalize(org.apache.pekko.actor.typed.Behavior,org.apache.pekko.actor.typed.Behavior,org.apache.pekko.actor.typed.TypedActorContext)">canonicalize</a>, <a href="../../../actor/typed/Behavior.html#existsInStack(org.apache.pekko.actor.typed.Behavior,scala.Function1)">existsInStack</a>, <a href="../../../actor/typed/Behavior.html#interpretMessage(org.apache.pekko.actor.typed.Behavior,org.apache.pekko.actor.typed.TypedActorContext,T)">interpretMessage</a>, <a href="../../../actor/typed/Behavior.html#interpretSignal(org.apache.pekko.actor.typed.Behavior,org.apache.pekko.actor.typed.TypedActorContext,org.apache.pekko.actor.typed.Signal)">interpretSignal</a>, <a href="../../../actor/typed/Behavior.html#isAlive(org.apache.pekko.actor.typed.Behavior)">isAlive</a>, <a href="../../../actor/typed/Behavior.html#isDeferred(org.apache.pekko.actor.typed.Behavior)">isDeferred</a>, <a href="../../../actor/typed/Behavior.html#isUnhandled(org.apache.pekko.actor.typed.Behavior)">isUnhandled</a>, <a href="../../../actor/typed/Behavior.html#narrow()">narrow</a>, <a href="../../../actor/typed/Behavior.html#start(org.apache.pekko.actor.typed.Behavior,org.apache.pekko.actor.typed.TypedActorContext)">start</a>, <a href="../../../actor/typed/Behavior.html#validateAsInitial(org.apache.pekko.actor.typed.Behavior)">validateAsInitial</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.apache.pekko.persistence.typed.PersistenceId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EventSourcedBehavior</h4>
<pre>public&nbsp;EventSourcedBehavior&#8203;(<a href="../PersistenceId.html" title="class in org.apache.pekko.persistence.typed">PersistenceId</a>&nbsp;persistenceId)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - stable unique identifier for the event sourced behavior</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(org.apache.pekko.persistence.typed.PersistenceId,org.apache.pekko.actor.typed.BackoffSupervisorStrategy)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EventSourcedBehavior</h4>
<pre>public&nbsp;EventSourcedBehavior&#8203;(<a href="../PersistenceId.html" title="class in org.apache.pekko.persistence.typed">PersistenceId</a>&nbsp;persistenceId,
                            <a href="../../../actor/typed/BackoffSupervisorStrategy.html" title="class in org.apache.pekko.actor.typed">BackoffSupervisorStrategy</a>&nbsp;onPersistFailure)</pre>
<div class="block">If using onPersistFailure the supervision is only around the event sourced behavior not any outer setup/withTimers
 block. If using restart any actions e.g. scheduling timers, can be done on the PreRestart signal or on the
 RecoveryCompleted signal.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - stable unique identifier for the event sourced behavior</dd>
<dd><code>onPersistFailure</code> - BackoffSupervisionStrategy for persist failures</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="Effect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Effect</h4>
<pre class="methodSignature">protected final&nbsp;<a href="EffectFactories.html" title="class in org.apache.pekko.persistence.typed.javadsl">EffectFactories</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;&nbsp;Effect()</pre>
<div class="block">Factory of effects.
 <p>
 Return effects from your handlers in order to instruct persistence on how to act on the incoming message (i.e. persist events).</div>
</li>
</ul>
<a id="apply(org.apache.pekko.actor.typed.TypedActorContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apply</h4>
<pre class="methodSignature">public&nbsp;<a href="../../../actor/typed/Behavior.html" title="class in org.apache.pekko.actor.typed">Behavior</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>&gt;&nbsp;apply&#8203;(<a href="../../../actor/typed/TypedActorContext.html" title="interface in org.apache.pekko.actor.typed">TypedActorContext</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>&gt;&nbsp;context)</pre>
<div class="block">INTERNAL API: DeferredBehavior init, not for user extension</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../actor/typed/internal/BehaviorImpl.DeferredBehavior.html#apply(org.apache.pekko.actor.typed.TypedActorContext)">apply</a></code>&nbsp;in class&nbsp;<code><a href="../../../actor/typed/internal/BehaviorImpl.DeferredBehavior.html" title="class in org.apache.pekko.actor.typed.internal">BehaviorImpl.DeferredBehavior</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a id="commandHandler()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commandHandler</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="CommandHandler.html" title="interface in org.apache.pekko.persistence.typed.javadsl">CommandHandler</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;&nbsp;commandHandler()</pre>
<div class="block">Implement by handling incoming commands and return an <code>Effect()</code> to persist or signal other effects
 of the command handling such as stopping the behavior or others.
 <p>
 Use <a href="#newCommandHandlerBuilder()"><code>newCommandHandlerBuilder()</code></a> to define the command handlers.
 <p>
 The command handlers are only invoked when the actor is running (i.e. not replaying).
 While the actor is persisting events, the incoming messages are stashed and only
 delivered to the handler once persisting them has completed.</div>
</li>
</ul>
<a id="emptyState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>emptyState</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&nbsp;emptyState()</pre>
<div class="block">Implement by returning the initial empty state object.
 This object will be passed into this behaviors handlers, until a new state replaces it.
 <p>
 Also known as "zero state" or "neutral state".</div>
</li>
</ul>
<a id="eventAdapter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eventAdapter</h4>
<pre class="methodSignature">public&nbsp;<a href="../EventAdapter.html" title="class in org.apache.pekko.persistence.typed">EventAdapter</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;?&gt;&nbsp;eventAdapter()</pre>
<div class="block">Transform the event in another type before giving to the journal. Can be used to wrap events
 in types Journals understand but is of a different type than <code>Event</code>.</div>
</li>
</ul>
<a id="eventHandler()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eventHandler</h4>
<pre class="methodSignature">protected abstract&nbsp;<a href="EventHandler.html" title="interface in org.apache.pekko.persistence.typed.javadsl">EventHandler</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&gt;&nbsp;eventHandler()</pre>
<div class="block">Implement by applying the event to the current state in order to return a new state.
 <p>
 Use <a href="#newEventHandlerBuilder()"><code>newEventHandlerBuilder()</code></a> to define the event handlers.
 <p>
 The event handlers are invoked during recovery as well as running operation of this behavior,
 in order to keep updating the state state.
 <p>
 For that reason it is strongly discouraged to perform side-effects in this handler;
 Side effects should be executed in <code>thenRun</code> or <code>recoveryCompleted</code> blocks.</div>
</li>
</ul>
<a id="journalPluginId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>journalPluginId</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;journalPluginId()</pre>
<div class="block">Override and define the journal plugin id that this actor should use instead of the default.</div>
</li>
</ul>
<a id="lastSequenceNumber(org.apache.pekko.actor.typed.javadsl.ActorContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastSequenceNumber</h4>
<pre class="methodSignature">public final&nbsp;long&nbsp;lastSequenceNumber&#8203;(<a href="../../../actor/typed/javadsl/ActorContext.html" title="interface in org.apache.pekko.actor.typed.javadsl">ActorContext</a>&lt;?&gt;&nbsp;ctx)</pre>
<div class="block">The last sequence number that was persisted, can only be called from inside the handlers of an <code>EventSourcedBehavior</code></div>
</li>
</ul>
<a id="newCommandHandlerBuilder()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newCommandHandlerBuilder</h4>
<pre class="methodSignature">protected&nbsp;<a href="CommandHandlerBuilder.html" title="class in org.apache.pekko.persistence.typed.javadsl">CommandHandlerBuilder</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Command</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;&nbsp;newCommandHandlerBuilder()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new, mutable, command handler builder</dd>
</dl>
</li>
</ul>
<a id="newEventHandlerBuilder()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newEventHandlerBuilder</h4>
<pre class="methodSignature">protected final&nbsp;<a href="EventHandlerBuilder.html" title="class in org.apache.pekko.persistence.typed.javadsl">EventHandlerBuilder</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>,&#8203;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&gt;&nbsp;newEventHandlerBuilder()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new, mutable, event handler builder</dd>
</dl>
</li>
</ul>
<a id="newSignalHandlerBuilder()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newSignalHandlerBuilder</h4>
<pre class="methodSignature">protected final&nbsp;<a href="SignalHandlerBuilder.html" title="class in org.apache.pekko.persistence.typed.javadsl">SignalHandlerBuilder</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;&nbsp;newSignalHandlerBuilder()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new, mutable signal handler builder</dd>
</dl>
</li>
</ul>
<a id="persistenceId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persistenceId</h4>
<pre class="methodSignature">public&nbsp;<a href="../PersistenceId.html" title="class in org.apache.pekko.persistence.typed">PersistenceId</a>&nbsp;persistenceId()</pre>
</li>
</ul>
<a id="recovery()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recovery</h4>
<pre class="methodSignature">public&nbsp;<a href="Recovery.html" title="class in org.apache.pekko.persistence.typed.javadsl">Recovery</a>&nbsp;recovery()</pre>
<div class="block">Override to change the strategy for recovery of snapshots and events.
 By default, snapshots and events are recovered.</div>
</li>
</ul>
<a id="retentionCriteria()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retentionCriteria</h4>
<pre class="methodSignature">public&nbsp;<a href="RetentionCriteria.html" title="class in org.apache.pekko.persistence.typed.javadsl">RetentionCriteria</a>&nbsp;retentionCriteria()</pre>
<div class="block">Criteria for retention/deletion of snapshots and events.
 By default, retention is disabled and snapshots are not saved and deleted automatically.</div>
</li>
</ul>
<a id="shouldSnapshot(java.lang.Object,java.lang.Object,long)">
<!--   -->
</a><a id="shouldSnapshot(State,Event,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldSnapshot</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;shouldSnapshot&#8203;(<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&nbsp;state,
                              <a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&nbsp;event,
                              long&nbsp;sequenceNr)</pre>
<div class="block">Initiates a snapshot if the given predicate evaluates to true.
 <p>
 Decide to store a snapshot based on the State, Event and sequenceNr when the event has
 been successfully persisted.
 <p>
 When persisting multiple events at once the snapshot is triggered after all the events have
 been persisted.
 <p>
 Snapshots triggered by <code>snapshotWhen</code> will not trigger deletes of old snapshots and events if
 <code>EventSourcedBehavior.retentionCriteria</code> with <code>RetentionCriteria.snapshotEvery</code> is used together with
 <code>shouldSnapshot</code>. Such deletes are only triggered by snapshots matching the <code>numberOfEvents</code> in the
 <a href="RetentionCriteria.html" title="class in org.apache.pekko.persistence.typed.javadsl"><code>RetentionCriteria</code></a>.
 <p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if snapshot should be saved at the given <code>state</code>, <code>event</code> and <code>sequenceNr</code> when the event has
         been successfully persisted</dd>
</dl>
</li>
</ul>
<a id="signalHandler()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signalHandler</h4>
<pre class="methodSignature">protected&nbsp;<a href="SignalHandler.html" title="class in org.apache.pekko.persistence.typed.javadsl">SignalHandler</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;&nbsp;signalHandler()</pre>
<div class="block">Override to react on general lifecycle signals and persistence specific signals (subtypes of
 <code>pekko.persistence.typed.EventSourcedSignal</code>).
 <p>
 Use <a href="#newSignalHandlerBuilder()"><code>newSignalHandlerBuilder()</code></a> to define the signal handler.</div>
</li>
</ul>
<a id="snapshotAdapter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotAdapter</h4>
<pre class="methodSignature">public&nbsp;<a href="../SnapshotAdapter.html" title="interface in org.apache.pekko.persistence.typed">SnapshotAdapter</a>&lt;<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">State</a>&gt;&nbsp;snapshotAdapter()</pre>
<div class="block">Transform the state into another type before giving it to and from the journal. Can be used
 to migrate from different state types e.g. when migration from PersistentFSM to Typed EventSourcedBehavior.</div>
</li>
</ul>
<a id="snapshotPluginId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotPluginId</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;snapshotPluginId()</pre>
<div class="block">Override and define the snapshot store plugin id that this actor should use instead of the default.</div>
</li>
</ul>
<a id="snapshotSelectionCriteria()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotSelectionCriteria</h4>
<pre class="methodSignature">public&nbsp;<a href="../SnapshotSelectionCriteria.html" title="class in org.apache.pekko.persistence.typed">SnapshotSelectionCriteria</a>&nbsp;snapshotSelectionCriteria()</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">override recovery instead. Since Akka 2.6.5.</div>
</div>
<div class="block">Override and define the snapshot selection criteria used by this actor instead of the default.
 By default the most recent snapshot is used, and the remaining state updates are recovered by replaying events
 from the sequence number up until which the snapshot reached.
 <p>
 You may configure the behavior to skip replaying snapshots completely, in which case the recovery will be
 performed by replaying all events -- which may take a long time.</div>
</li>
</ul>
<a id="tagsFor(java.lang.Object)">
<!--   -->
</a><a id="tagsFor(Event)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>tagsFor</h4>
<pre class="methodSignature">public&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;tagsFor&#8203;(<a href="EventSourcedBehavior.html" title="type parameter in EventSourcedBehavior">Event</a>&nbsp;event)</pre>
<div class="block">The <code>tagger</code> function should give event tags, which will be used in persistence query</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
