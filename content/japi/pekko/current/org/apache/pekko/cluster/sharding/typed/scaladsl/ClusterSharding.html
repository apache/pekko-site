<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.17) on Wed Mar 01 23:28:13 CET 2023 -->
<title>ClusterSharding</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-03-01">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../../jquery/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ClusterSharding";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.pekko.cluster.sharding.typed.scaladsl</a></div>
<h2 title="Interface ClusterSharding" class="title">Interface ClusterSharding</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code><a href="../../../../actor/typed/Extension.html" title="interface in org.apache.pekko.actor.typed">Extension</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">ClusterSharding</span>
extends <a href="../../../../actor/typed/Extension.html" title="interface in org.apache.pekko.actor.typed">Extension</a></pre>
<div class="block">This extension provides sharding functionality of actors in a cluster.
 The typical use case is when you have many stateful actors that together consume
 more resources (e.g. memory) than fit on one machine. You need to distribute them across
 several nodes in the cluster and you want to be able to interact with them using their
 logical identifier, but without having to care about their physical location in the cluster,
 which might also change over time. It could for example be actors representing Aggregate Roots in
 Domain-Driven Design terminology. Here we call these actors "entities". These actors
 typically have persistent (durable) state, but this feature is not limited to
 actors with persistent state.
 <p>
 In this context sharding means that actors with an identifier, so called entities,
 can be automatically distributed across multiple nodes in the cluster. Each entity
 actor runs only at one place, and messages can be sent to the entity without requiring
 the sender to know the location of the destination actor. This is achieved by sending
 the messages via a <code>ShardRegion</code> actor provided by this extension, which knows how
 to route the message with the entity id to the final destination.
 <p>
 This extension is supposed to be used by first, typically at system startup on each node
 in the cluster, registering the supported entity types with the <a href="#init(org.apache.pekko.cluster.sharding.typed.scaladsl.Entity)"><code>init(org.apache.pekko.cluster.sharding.typed.scaladsl.Entity&lt;M, E&gt;)</code></a>
 method, which returns the <code>ShardRegion</code> actor reference for a named entity type.
 Messages to the entities are always sent via that <code>ActorRef</code>, i.e. the local <code>ShardRegion</code>.
 Messages can also be sent via the <a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>EntityRef</code></a> retrieved with <a href="#entityRefFor(org.apache.pekko.cluster.sharding.typed.scaladsl.EntityTypeKey,java.lang.String)"><code>entityRefFor(org.apache.pekko.cluster.sharding.typed.scaladsl.EntityTypeKey&lt;M&gt;, java.lang.String)</code></a>,
 which will also send via the local <code>ShardRegion</code>.
 <p>
 Some settings can be configured as described in the <code>pekko.cluster.sharding</code>
 section of the <code>reference.conf</code>.
 <p>
 The <code>ShardRegion</code> actor is started on each node in the cluster, or group of nodes
 tagged with a specific role. The <code>ShardRegion</code> is created with a <code>ShardingMessageExtractor</code>
 to extract the entity identifier and the shard identifier from incoming messages.
 A shard is a group of entities that will be managed together. For the first message in a
 specific shard the <code>ShardRegion</code> requests the location of the shard from a central coordinator,
 the <code>pekko.cluster.sharding.ShardCoordinator</code>. The <code>ShardCoordinator</code> decides which <code>ShardRegion</code>
 owns the shard. The <code>ShardRegion</code> receives the decided home of the shard
 and if that is the <code>ShardRegion</code> instance itself it will create a local child
 actor representing the entity and direct all messages for that entity to it.
 If the shard home is another <code>ShardRegion</code> instance messages will be forwarded
 to that <code>ShardRegion</code> instance instead. While resolving the location of a
 shard incoming messages for that shard are buffered and later delivered when the
 shard location is known. Subsequent messages to the resolved shard can be delivered
 to the target destination immediately without involving the <code>ShardCoordinator</code>.
 <p>
 To make sure that at most one instance of a specific entity actor is running somewhere
 in the cluster it is important that all nodes have the same view of where the shards
 are located. Therefore the shard allocation decisions are taken by the central
 <code>ShardCoordinator</code>, which is running as a cluster singleton, i.e. one instance on
 the oldest member among all cluster nodes or a group of nodes tagged with a specific
 role. The oldest member can be determined by <code>pekko.cluster.Member#isOlderThan</code>.
 <p>
 To be able to use newly added members in the cluster the coordinator facilitates rebalancing
 of shards, i.e. migrate entities from one node to another. In the rebalance process the
 coordinator first notifies all <code>ShardRegion</code> actors that a handoff for a shard has started.
 That means they will start buffering incoming messages for that shard, in the same way as if the
 shard location is unknown. During the rebalance process the coordinator will not answer any
 requests for the location of shards that are being rebalanced, i.e. local buffering will
 continue until the handoff is completed. The <code>ShardRegion</code> responsible for the rebalanced shard
 will stop all entities in that shard by sending the <code>handOffMessage</code> to them. When all entities have
 been terminated the <code>ShardRegion</code> owning the entities will acknowledge the handoff as completed
 to the coordinator. Thereafter the coordinator will reply to requests for the location of
 the shard and thereby allocate a new home for the shard and then buffered messages in the
 <code>ShardRegion</code> actors are delivered to the new location. This means that the state of the entities
 are not transferred or migrated. If the state of the entities are of importance it should be
 persistent (durable), e.g. with <code>pekko-persistence</code>, so that it can be recovered at the new
 location.
 <p>
 The logic that decides which shards to rebalance is defined in a plugable shard
 allocation strategy. The default implementation <code>pekko.cluster.sharding.ShardCoordinator.LeastShardAllocationStrategy</code>
 picks shards for handoff from the <code>ShardRegion</code> with most number of previously allocated shards.
 They will then be allocated to the <code>ShardRegion</code> with least number of previously allocated shards,
 i.e. new members in the cluster. There is a configurable threshold of how large the difference
 must be to begin the rebalancing. This strategy can be replaced by an application specific
 implementation.
 <p>
 The state of shard locations in the <code>ShardCoordinator</code> is stored with <code>pekko-distributed-data</code> or
 <code>pekko-persistence</code> to survive failures. When a crashed or unreachable coordinator
 node has been removed (via down) from the cluster a new <code>ShardCoordinator</code> singleton
 actor will take over and the state is recovered. During such a failure period shards
 with known location are still available, while messages for new (unknown) shards
 are buffered until the new <code>ShardCoordinator</code> becomes available.
 <p>
 As long as a sender uses the same <code>ShardRegion</code> actor to deliver messages to an entity
 actor the order of the messages is preserved. As long as the buffer limit is not reached
 messages are delivered on a best effort basis, with at-most once delivery semantics,
 in the same way as ordinary message sending. Reliable end-to-end messaging, with
 at-least-once semantics can be added by using <code>AtLeastOnceDelivery</code> in <code>pekko-persistence</code>.
 <p>
 Some additional latency is introduced for messages targeted to new or previously
 unused shards due to the round-trip to the coordinator. Rebalancing of shards may
 also add latency. This should be considered when designing the application specific
 shard resolution, e.g. to avoid too fine grained shards.
 <p>
 The <code>ShardRegion</code> actor can also be started in proxy only mode, i.e. it will not
 host any entities itself, but knows how to delegate messages to the right location.
 <p>
 If the state of the entities are persistent you may stop entities that are not used to
 reduce memory consumption. This is done by the application specific implementation of
 the entity actors for example by defining receive timeout (<code>context.setReceiveTimeout</code>).
 If a message is already enqueued to the entity when it stops itself the enqueued message
 in the mailbox will be dropped. To support graceful passivation without losing such
 messages the entity actor can send <a href="ClusterSharding.Passivate.html" title="class in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>ClusterSharding.Passivate</code></a> to the <code>ActorRef[ShardCommand]</code>
 that was passed in to the factory method when creating the entity..
 The specified <code>stopMessage</code> message will be sent back to the entity, which is
 then supposed to stop itself. Incoming messages will be buffered by the <code>ShardRegion</code>
 between reception of <code>Passivate</code> and termination of the entity. Such buffered messages
 are thereafter delivered to a new incarnation of the entity.
 <p>
 This class is not intended for user extension other than for test purposes (e.g.
 stub implementation). More methods may be added in the future and that may break
 such implementations.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="ClusterSharding.Passivate.html" title="class in org.apache.pekko.cluster.sharding.typed.scaladsl">ClusterSharding.Passivate</a>&lt;<a href="ClusterSharding.Passivate.html" title="type parameter in ClusterSharding.Passivate">M</a>&gt;</span></code></th>
<td class="colLast">
<div class="block">The entity can request passivation by sending the <a href="ClusterSharding.Passivate.html" title="class in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>ClusterSharding.Passivate</code></a> message
 to the <code>ActorRef[ShardCommand]</code> that was passed in to the factory method
 when creating the entity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="ClusterSharding.Passivate$.html" title="class in org.apache.pekko.cluster.sharding.typed.scaladsl">ClusterSharding.Passivate$</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="ClusterSharding.ShardCommand.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">ClusterSharding.ShardCommand</a></span></code></th>
<td class="colLast">
<div class="block">When an entity is created an <code>ActorRef[ShardCommand]</code> is passed to the
 factory method.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../javadsl/ClusterSharding.html" title="class in org.apache.pekko.cluster.sharding.typed.javadsl">ClusterSharding</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asJava()">asJava</a></span>()</code></th>
<td class="colLast">
<div class="block">INTERNAL API</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../ShardCoordinator.ShardAllocationStrategy.html" title="interface in org.apache.pekko.cluster.sharding">ShardCoordinator.ShardAllocationStrategy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultShardAllocationStrategy(org.apache.pekko.cluster.sharding.typed.ClusterShardingSettings)">defaultShardAllocationStrategy</a></span>&#8203;(<a href="../ClusterShardingSettings.html" title="class in org.apache.pekko.cluster.sharding.typed">ClusterShardingSettings</a>&nbsp;settings)</code></th>
<td class="colLast">
<div class="block">The default <code>ShardAllocationStrategy</code> is configured by <code>least-shard-allocation-strategy</code> properties.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;M&gt;&nbsp;<a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityRef</a>&lt;M&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entityRefFor(org.apache.pekko.cluster.sharding.typed.scaladsl.EntityTypeKey,java.lang.String)">entityRefFor</a></span>&#8203;(<a href="EntityTypeKey.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityTypeKey</a>&lt;M&gt;&nbsp;typeKey,
            java.lang.String&nbsp;entityId)</code></th>
<td class="colLast">
<div class="block">Create an <code>ActorRef</code>-like reference to a specific sharded entity.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>&lt;M&gt;&nbsp;<a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityRef</a>&lt;M&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entityRefFor(org.apache.pekko.cluster.sharding.typed.scaladsl.EntityTypeKey,java.lang.String,java.lang.String)">entityRefFor</a></span>&#8203;(<a href="EntityTypeKey.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityTypeKey</a>&lt;M&gt;&nbsp;typeKey,
            java.lang.String&nbsp;entityId,
            java.lang.String&nbsp;dataCenter)</code></th>
<td class="colLast">
<div class="block">Create an <code>ActorRef</code>-like reference to a specific sharded entity running in another data center.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>&lt;M,&#8203;E&gt;<br><a href="../../../../actor/typed/ActorRef.html" title="interface in org.apache.pekko.actor.typed">ActorRef</a>&lt;E&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#init(org.apache.pekko.cluster.sharding.typed.scaladsl.Entity)">init</a></span>&#8203;(<a href="Entity.html" title="class in org.apache.pekko.cluster.sharding.typed.scaladsl">Entity</a>&lt;M,&#8203;E&gt;&nbsp;entity)</code></th>
<td class="colLast">
<div class="block">Initialize sharding for the given <code>entity</code> factory settings.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../actor/typed/ActorRef.html" title="interface in org.apache.pekko.actor.typed">ActorRef</a>&lt;<a href="../ClusterShardingQuery.html" title="interface in org.apache.pekko.cluster.sharding.typed">ClusterShardingQuery</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shardState()">shardState</a></span>()</code></th>
<td class="colLast">
<div class="block">Actor for querying Cluster Sharding state</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="init(org.apache.pekko.cluster.sharding.typed.scaladsl.Entity)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre class="methodSignature">&lt;M,&#8203;E&gt;&nbsp;<a href="../../../../actor/typed/ActorRef.html" title="interface in org.apache.pekko.actor.typed">ActorRef</a>&lt;E&gt;&nbsp;init&#8203;(<a href="Entity.html" title="class in org.apache.pekko.cluster.sharding.typed.scaladsl">Entity</a>&lt;M,&#8203;E&gt;&nbsp;entity)</pre>
<div class="block">Initialize sharding for the given <code>entity</code> factory settings.
 <p>
 It will start a shard region or a proxy depending on if the settings require role and if this node has
 such a role.
 <p></div>
</li>
</ul>
<a id="entityRefFor(org.apache.pekko.cluster.sharding.typed.scaladsl.EntityTypeKey,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entityRefFor</h4>
<pre class="methodSignature">&lt;M&gt;&nbsp;<a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityRef</a>&lt;M&gt;&nbsp;entityRefFor&#8203;(<a href="EntityTypeKey.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityTypeKey</a>&lt;M&gt;&nbsp;typeKey,
                              java.lang.String&nbsp;entityId)</pre>
<div class="block">Create an <code>ActorRef</code>-like reference to a specific sharded entity.
 <p>
 You have to correctly specify the type of messages the target can handle via the <code>typeKey</code>.
 <p>
 Messages sent through this <a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>EntityRef</code></a> will be wrapped in a <code>ShardingEnvelope</code> including the
 here provided <code>entityId</code>.
 <p>
 This can only be used if the default <code>ShardingEnvelope</code> is used, when using custom envelopes or in message
 entity ids you will need to use the <code>ActorRef[E]</code> returned by sharding init for messaging with the sharded actors.
 <p>
 For in-depth documentation of its semantics, see <a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>EntityRef</code></a>.</div>
</li>
</ul>
<a id="entityRefFor(org.apache.pekko.cluster.sharding.typed.scaladsl.EntityTypeKey,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entityRefFor</h4>
<pre class="methodSignature">&lt;M&gt;&nbsp;<a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityRef</a>&lt;M&gt;&nbsp;entityRefFor&#8203;(<a href="EntityTypeKey.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl">EntityTypeKey</a>&lt;M&gt;&nbsp;typeKey,
                              java.lang.String&nbsp;entityId,
                              java.lang.String&nbsp;dataCenter)</pre>
<div class="block">Create an <code>ActorRef</code>-like reference to a specific sharded entity running in another data center.
 <p>
 You have to correctly specify the type of messages the target can handle via the <code>typeKey</code>.
 <p>
 Messages sent through this <a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>EntityRef</code></a> will be wrapped in a <code>ShardingEnvelope</code> including the
 here provided <code>entityId</code>.
 <p>
 This can only be used if the default <code>ShardingEnvelope</code> is used, when using custom envelopes or in message
 entity ids you will need to use the <code>ActorRef[E]</code> returned by sharding init for messaging with the sharded actors.
 <p>
 For in-depth documentation of its semantics, see <a href="EntityRef.html" title="interface in org.apache.pekko.cluster.sharding.typed.scaladsl"><code>EntityRef</code></a>.</div>
</li>
</ul>
<a id="shardState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardState</h4>
<pre class="methodSignature"><a href="../../../../actor/typed/ActorRef.html" title="interface in org.apache.pekko.actor.typed">ActorRef</a>&lt;<a href="../ClusterShardingQuery.html" title="interface in org.apache.pekko.cluster.sharding.typed">ClusterShardingQuery</a>&gt;&nbsp;shardState()</pre>
<div class="block">Actor for querying Cluster Sharding state</div>
</li>
</ul>
<a id="defaultShardAllocationStrategy(org.apache.pekko.cluster.sharding.typed.ClusterShardingSettings)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultShardAllocationStrategy</h4>
<pre class="methodSignature"><a href="../../ShardCoordinator.ShardAllocationStrategy.html" title="interface in org.apache.pekko.cluster.sharding">ShardCoordinator.ShardAllocationStrategy</a>&nbsp;defaultShardAllocationStrategy&#8203;(<a href="../ClusterShardingSettings.html" title="class in org.apache.pekko.cluster.sharding.typed">ClusterShardingSettings</a>&nbsp;settings)</pre>
<div class="block">The default <code>ShardAllocationStrategy</code> is configured by <code>least-shard-allocation-strategy</code> properties.</div>
</li>
</ul>
<a id="asJava()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>asJava</h4>
<pre class="methodSignature"><a href="../javadsl/ClusterSharding.html" title="class in org.apache.pekko.cluster.sharding.typed.javadsl">ClusterSharding</a>&nbsp;asJava()</pre>
<div class="block">INTERNAL API</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
